{% extends 'navbar.html' %}
{% load static %}

{% block title %} Home - Welcome! {% endblock %}

{% block content %}
    <div class="fs-6" style="margin-right: 28px;margin-top: 14px;margin-bottom: 22px;color: var(--bs-secondary);padding-left: 0px;margin-left: 28px;">
        <h1 style="background: #e1edbd;font-size: 30px;padding-bottom: 5px;color: var(--bs-black);">Daily Feed</h1>
        <div class="table-responsive" style="background: #e1edbd;border: 1px solid #82b068;border-bottom-width: 1px;border-bottom-style: solid;border-radius: 2px;padding-left: 0px;margin-left: -5px;margin-right: -5px;">
            <table class="table">
                <thead style="background: #82b068;">
                    <tr class="text-capitalize fs-6 text-center text-body">
                        <th>Time</th>
                        <th style="--bs-primary: #E1EDBD;--bs-primary-rgb: 225,237,189;--bs-secondary: #719A5E;--bs-secondary-rgb: 113,154,94;--bs-success: #719A5E;--bs-success-rgb: 113,154,94;--bs-info: #E1EDBD;--bs-info-rgb: 225,237,189;--bs-warning: #719A5E;--bs-warning-rgb: 113,154,94;--bs-danger: #719A5E;--bs-danger-rgb: 113,154,94;--bs-light: #E1EDBD;--bs-light-rgb: 225,237,189;--bs-dark: #719A5E;--bs-dark-rgb: 113,154,94;--bs-body-color: #E1EDBD;--bs-body-bg: #E1EDBD;">Recycled</th>
                        <th>Likes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in Transaction %}
                    <tr class="text-center">
                        <td>{{item.time}}</td>
                        <td><p>{{item.user}} just recycled {{item.product.barcode}} at {{item.bin.binId }}</p></td>
                        <td>{{item.likes}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <a class="btn btn-light me-2" role="button" href="{% url 'barcode_lookup' %}"style="color: var(--bs-black);background: var(--bs-primary);">Scan Item ?</a>
    </div>
{% endblock %}

<script>
    // #Hi Angelo, If you feel like finishing the work I have implemented the whole backend I just need you to
    // change the values below from 100 to the respective lat and long that you can calculate in the scrip xxxx

    function currentLocationInsert() {
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(binDistCalc);
            } else {
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function binDistCalc(position) {
            var lat = position.coords.latitude;
            var long = position.coords.longitude;
            document.getElementById("lat").value = lat;
            document.getElementById("long").value = long;
        }

        getLocation();
    }

    currentLocationInsert();
</script>
</html>
