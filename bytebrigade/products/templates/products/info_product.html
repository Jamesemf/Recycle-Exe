{% extends 'navbar.html' %}

{% block title %} Product Information {% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-12 offset-md-0">
                <div class="card-body">
                    <picture class="d-sm-flex d-md-flex justify-content-sm-center justify-content-md-center">
                        <img class="d-sm-flex d-md-flex justify-content-md-start" width="100" height="80" src={{ image }}></picture>
                    <div></div>
                    <h6 class="text-center text-muted card-subtitle mb-2">Product name: {{ name }}</h6>
                    <h6 class="text-center text-muted card-subtitle mb-2">Barcode: {{ barcode }}</h6>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="card-body">
                    <h4 class="card-title">Components</h4>
                    <ul>
                        <li>Weight: {{ weight }}</li>
                        <li>Material: {{ material }}</li>
                        <li>Recyclable: {{ recycle }}</li>
                        <li>Bin-type: {{ binType }} bin</li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card-body">
                    <h4 class="card-title">Product History</h4>
                    {% for item in history %}
                        <li> {{ item.time }} at {{ item.bin.binName }} </li>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    {% if present_button == 1 %}
    <div class="container">
        <div class="row">
            <div class="col-md-12 d-flex d-md-flex justify-content-center justify-content-md-center">
                <form action="" method="post">
                    {% csrf_token %}
                    <input type="hidden" name="location_lat" id="location_lat" value=0>
                    <input type="hidden" name="location_long" id="location_long" value=0>
                    <button class="btn btn-primary" type='submit'>Would you like to Recycle</button>
                </form>
            </div>
        </div>
    </div>
    {% endif %}
{% endblock %}
    {% block script %}
    <script>

        currentLocationInsert();
        /**
         * This function retrieves you current location using geolocation and sets
         * the hidden fields within the form your long and lat when loading the page
         *
         * @param none
         *
         * */
        function currentLocationInsert() {
            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(location);
                } else {
                    x.innerHTML = "Geolocation is not supported by this browser.";
                }
            }
            /**
             *
             * This function puts your current latitude and longitude into h
             *
             * */
            function location(position) {
                var lat = position.coords.latitude;
                var long = position.coords.longitude;
                document.getElementById("location_lat").value = lat;
                document.getElementById("location_long").value = long;
            }
            getLocation();
        }

    </script>
{% endblock %}